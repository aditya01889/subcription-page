"use strict";(self.webpackChunkcozy_cat_kitchen=self.webpackChunkcozy_cat_kitchen||[]).push([[333],{333:(e,a,s)=>{s.r(a),s.d(a,{default:()=>u});var n=s(43),r=s(963),t=s.n(r),l=s(283),i=s(536),o=s(579);t().setAppElement("#root");const c=e=>{let{isOpen:a,onRequestClose:s,onSubmit:r,cart:c}=e;const[d,m]=(0,n.useState)({name:"",address:"",email:"",phone:""}),{showError:p,clearError:u}=(0,l.q)(),h=(0,n.useCallback)((0,i.debounce)(((e,a)=>{m((s=>({...s,[e]:a})))}),300),[]),b=e=>{const{name:a,value:s}=e.target;h(a,s)};return(0,o.jsxs)(t(),{isOpen:a,onRequestClose:s,className:"delivery-modal",children:[(0,o.jsx)("h2",{children:"Delivery Details"}),(0,o.jsxs)("form",{onSubmit:e=>{e.preventDefault(),d.name&&d.address&&d.email&&d.phone?0!==c.length?(u(),r({...d,cart:c})):p("Your cart is empty. Please add some items to your cart."):p("Please fill out all fields.")},children:[(0,o.jsxs)("label",{htmlFor:"name",children:["Name:",(0,o.jsx)("input",{id:"name",type:"text",name:"name",value:d.name,onChange:b,"aria-label":"Enter your name",required:!0})]}),(0,o.jsxs)("label",{htmlFor:"address",children:["Address:",(0,o.jsx)("input",{id:"address",type:"text",name:"address",value:d.address,onChange:b,"aria-label":"Enter your address",required:!0})]}),(0,o.jsxs)("label",{htmlFor:"email",children:["Email:",(0,o.jsx)("input",{id:"email",type:"email",name:"email",value:d.email,onChange:b,"aria-label":"Enter your email",required:!0})]}),(0,o.jsxs)("label",{htmlFor:"phone",children:["Phone:",(0,o.jsx)("input",{id:"phone",type:"tel",name:"phone",value:d.phone,onChange:b,"aria-label":"Enter your phone number",required:!0})]}),(0,o.jsx)("button",{type:"submit",children:"Proceed to Payment"})]})]})};var d=s(213);const m={razorpayKey:"rzp_test_7vd6hKKDhe9AHB",backendUrl:"https://cozycatkitchen-backend.onrender.com"},p=[{name:"Kitten Subscription",price:1499,meals:"21 Meals (70 gm each)",broth:"1 Broth Pack (100ml)",mealsPerDay:"3 Meals a Day",delivery:"Free Weekly Delivery",savings:"Save \u20b9201/week",image:"./images/kitten-box.webp",planId:"plan_P16C8fYlOuifli"},{name:"Cat Subscription",price:1799,meals:"28 Meals (70 gm each)",broth:"2 Broth Packs (100ml each)",mealsPerDay:"4 Meals a Day",delivery:"Free Weekly Delivery",savings:"Save \u20b9261/week",image:"./images/cat-box.webp",planId:"plan_P16CnSJeddGUF3"}],u=()=>{const[e,a]=(0,n.useState)([0,0]),[s,r]=(0,n.useState)(!1),[t,i]=(0,n.useState)([]),{showError:u,clearError:h}=(0,l.q)(),b=(0,n.useCallback)((()=>{const a=p.map(((a,s)=>({name:a.name,sku:`SUB_${a.name.replace(/\s/g,"_").toUpperCase()}`,price:a.price,quantity:e[s],planId:a.planId}))).filter((e=>e.quantity>0));0!==a.length?(i(a),h(),r(!0)):u("Please select at least one item to proceed.")}),[e,u,h]),y=(0,n.useCallback)(((e,s)=>{a((a=>{const n=[...a];return n[e]=Math.max(0,Number(s)),n}))}),[]);return(0,o.jsxs)("section",{id:"subscription-plans",className:"subscription-section",children:[(0,o.jsx)("img",{src:"./images/logo-white.webp",alt:"Cozy Cat Kitchen Logo",className:"title-logo",loading:"lazy"}),(0,o.jsx)("div",{className:"subscription-plans",children:p.map(((a,s)=>(0,o.jsxs)("div",{className:"plan-card "+(a.name.toLowerCase().includes("kitten")?"kitten-subscription":"cat-subscription"),children:[(0,o.jsx)("img",{src:a.image,alt:a.name,className:"box-icon",loading:"lazy"}),(0,o.jsx)("h3",{children:a.name}),(0,o.jsxs)("p",{children:["\u20b9",a.price," / week"]}),(0,o.jsx)("div",{className:"card-line"}),(0,o.jsxs)("ul",{children:[(0,o.jsxs)("li",{children:["\ud83d\udc3e ",a.meals]}),(0,o.jsxs)("li",{children:["\ud83d\udc3e ",a.broth]}),(0,o.jsxs)("li",{children:["\ud83d\udc3e ",a.mealsPerDay]}),(0,o.jsxs)("li",{children:["\ud83d\udc3e ",a.delivery]}),(0,o.jsxs)("li",{children:["\ud83d\udc3e ",a.savings]})]}),(0,o.jsxs)("div",{className:"quantity-buttons",children:[(0,o.jsx)("button",{onClick:()=>y(s,e[s]-1),children:"-"}),(0,o.jsx)("input",{type:"number",value:e[s],onChange:e=>y(s,e.target.value),min:"0"}),(0,o.jsx)("button",{onClick:()=>y(s,e[s]+1),children:"+"})]})]},s)))}),(0,o.jsx)("button",{className:"buy-now-button",onClick:b,children:"Buy Now"}),(0,o.jsx)(c,{isOpen:s,onRequestClose:()=>r(!1),onSubmit:async e=>{try{const a=(await d.A.post(`${m.backendUrl}/create-razorpay-subscriptions`,{cart:t,email:e.email,phone:e.phone})).data.subscriptionIds.map((e=>e.subscriptionId)),s={key:m.razorpayKey,subscription_id:a[0],name:"Cozy Cat Kitchen",description:t.map((e=>e.name)).join(", "),handler:function(a){d.A.post(`${m.backendUrl}/create-shiprocket-order`,{...e,cart:t}).catch((e=>{console.error("Error creating Shiprocket order:",e),u("Order creation failed. Please try again.")}))},prefill:{name:e.name,email:e.email,contact:e.phone},theme:{color:"#3399cc"}};new window.Razorpay(s).open()}catch(a){console.error("Error processing payment:",a),u("Payment failed, please try again.")}r(!1)},cart:t})]})}}}]);
//# sourceMappingURL=333.eb1d9f94.chunk.js.map